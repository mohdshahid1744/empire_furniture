<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon.png">

  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />

		<!-- Bootstrap CSS -->
		<link href="/static/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="/static/tiny-slider.css" rel="stylesheet">
		<link href="/static/style2.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Popper.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<title>Empire furniture </title>
    
	</head>

	<body>

		<!-- Start Header/Navigation -->
		<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

			<div class="container">
                <a class="navbar-brand" href="/home">Empire <span style="color: red;">Furniture</span></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarsFurni">
					<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
						<li class="nav-item ">
							<a class="nav-link" href="/home">Home</a>
						</li>
						<li><a class="nav-link" href="/shop">Shop</a></li>
					
						<li><a class="nav-link" href="/services">Services</a></li>
						<li><a class="nav-link" href="/blog">Blog</a></li>
						<li><a class="nav-link" href="/contact">Contact us</a></li>
					</ul>

					<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
						<li><a class="nav-link" href="/userinfo"><img src="/static/user.svg"></a></li>
						<li><a class="nav-link" href="/cart"><img src="/static/cart.svg"></a></li>
					</ul>
				</div>
			</div>
				
		</nav>
		<!-- End Header/Navigation -->

		<!-- Start Hero Section -->
			<div class="hero">
				<div class="container">
					<div class="row justify-content-between">
						<div class="col-lg-5">
							<div class="intro-excerpt">
								<h1>Checkout</h1>
							</div>
						</div>
						<div class="col-lg-7">
							
						</div>
					</div>
				</div>
			</div>
		<!-- End Hero Section -->
        <div class="container" style="background-color: #fff;border-radius: 8px;box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);padding: 20px;width: 300px;text-align: center; margin-top: 30px;margin-bottom: 120px;width: 90%;">
            <form id="userEditForm" action="/changepassword" method="post">
                <h2 style="color: #333;">Change Password</h2>
                <label for="currentPassword" style="display: block;margin: 10px 0 5px;font-weight: bold;text-align: left;">Current Password:</label>
                <input type="password" id="currentPassword" name="currentPassword" placeholder="Enter current password" style="width: 100%;padding: 10px;margin-bottom: 15px;box-sizing: border-box;border: 1px solid #ccc;border-radius: 5px;font-size: 16px;">
    
                <label for="newPassword" style="display: block;margin: 10px 0 5px;font-weight: bold;text-align: left;">New Password:</label>
                <input type="password" id="newPassword" name="newPassword" placeholder="Enter new password" style="width: 100%;padding: 10px;margin-bottom: 15px;box-sizing: border-box;border: 1px solid #ccc;border-radius: 5px;font-size: 16px;">
               

                
                <label for="confirmNewPassword" style="display: block;margin: 10px 0 5px;font-weight: bold;text-align: left;">confirm New Password:</label>
                <input type="password" id="confirmNewPassword" name="confirmNewPassword" placeholder="Confirm new password" style="width: 100%;padding: 10px;margin-bottom: 15px;box-sizing: border-box;border: 1px solid #ccc;border-radius: 5px;font-size: 16px;">
    
                <button type="button" onclick="saveChanges()" style="    background-color: #4caf50;color: #fff;padding: 10px 15px;border: none;border-radius: 5px;cursor: pointer;
                font-size: 16px;
                width: 100%;
                box-sizing: border-box;">Save Changes</button>
            </form>
        </div>
        <div id="password_match_error" style="color: red; margin-left: 45px;"></div>
      
<% if (error) { %>
    <div class="error-message">
        <%= error %>
    </div>
    <script>
        // Display an alert box with the error message
        alert('<%= error %>');
    </script>
<% } %>
      </div>
        </div>



        <!-- Start Footer Section -->
        <footer class="footer-section">
            <div class="container relative">

                <div class="sofa-img">
                    <img src="/static/sofa.png" alt="Image" class="img-fluid">
                </div>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="subscription-form">
                            <h3 class="d-flex align-items-center"><span class="me-1"><img src="/static/envelope-outline.svg" alt="Image" class="img-fluid"></span><span>Subscribe to Newsletter</span></h3>

                            <form action="#" class="row g-3">
                                <div class="col-auto">
                                    <input type="text" class="form-control" placeholder="Enter your name">
                                </div>
                                <div class="col-auto">
                                    <input type="email" class="form-control" placeholder="Enter your email">
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-primary">
                                        <span class="fa fa-paper-plane"></span>
                                    </button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>

                <div class="row g-5 mb-5">
                    <div class="col-lg-4">
                        <div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Empire <span style="color: red;">Furniture</span></a></div>
                        <p class="mb-4">our products are crafted with exceptional materials, ensuring durability and longevity. We take pride in offering modern interior design solutions that not only enhance the aesthetics of any space but also provide utmost comfort and functionality. </p>

                        <ul class="list-unstyled custom-social">
                            <li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
                            <li><a href="#"><span class="fa fa-brands fa-twitter"></span></a></li>
                            <li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
                            <li><a href="#"><span class="fa fa-brands fa-linkedin"></span></a></li>
                        </ul>
                    </div>

                    <div class="col-lg-8">
                        <div class="row links-wrap">
                            <div class="col-6 col-sm-6 col-md-3">
                                <ul class="list-unstyled">
                                    <li><a href="#">About us</a></li>
                                    <li><a href="#">Services</a></li>
                                    <li><a href="#">Blog</a></li>
                                    <li><a href="#">Contact us</a></li>
                                </ul>
                            </div>

                            <div class="col-6 col-sm-6 col-md-3">
                                <ul class="list-unstyled">
                                    <li><a href="#">Support</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul>
                            </div>

                            <div class="col-6 col-sm-6 col-md-3">
                                <ul class="list-unstyled">
                                    <li><a href="#">Jobs</a></li>
                                    <li><a href="#">Delivery</a></li>
                                    <li><a href="#">Payment methods</a></li>
                                    <li><a href="#">Return & Exchange</a></li>
                                </ul>
                            </div>

                        
                        </div>
                    </div>

                </div>

                <div class="border-top copyright">
                    <div class="row pt-4">
                        <div class="col-lg-6">
                            <p class="mb-2 text-center text-lg-start">Copyright &copy;<script>document.write(new Date().getFullYear());</script>. All Rights Reserved. &mdash; Designed with love by <a href="https://untree.co">Untree.co</a> Distributed By <a hreff="https://themewagon.com">ThemeWagon</a>  <!-- License information: https://untree.co/license/ -->
            </p>
                        </div>

                        <div class="col-lg-6 text-center text-lg-end">
                            <ul class="list-unstyled d-inline-flex ms-auto">
                                <li class="me-4"><a href="#">Terms &amp; Conditions</a></li>
                                <li><a href="#">Privacy Policy</a></li>
                            </ul>
                        </div>

                    </div>
                </div>

            </div>
        </footer>
        <!-- End Footer Section -->	


		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="js/tiny-slider.js"></script>
		<script src="js/custom.js"></script>

        <script>
            function saveChanges() {
                var currentPassword = $('#currentPassword').val();
                var newPassword = $('#newPassword').val();
                var confirmNewPassword = $('#confirmNewPassword').val();
                const passwordRegex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{6,}$/;
                if (!passwordRegex.test(password)) {
        passwordMatchError.textContent = 'Password must be at least 6 characters long and include at least one uppercase letter, one lowercase letter, one digit, and one special character.';
        passwordMatchError.style.display = 'block';
        passwordMatchError.style.fontSize = '8px'; 
        return false;
    } else {
        passwordMatchError.style.display = 'none';
    }
                if (!currentPassword || !newPassword || !confirmNewPassword) {
                    alert('Please fill in all fields.');
                    return;
                }
        
                if (newPassword.length < 6) {
                    alert('Password should be more than 5 characters.');
                    return;
                }
                if (newPassword !== confirmNewPassword) {
                    alert('New password and confirm password do not match.');
                    return;
                }

                var data = {
                    currentPassword: currentPassword,
                    newPassword: newPassword,
                    confirmNewPassword: confirmNewPassword
                };
        
                $.ajax({
    type: 'POST',
    url: '/changepassword',
    contentType: 'application/json',
    data: JSON.stringify(data),
    success: function (response) {
        window.location.href = '/userinfo';
    },
    error: function (error) {
        console.error('Change password request failed:', error.status);
    }
});
            }
        </script>
        
	</body>

</html>
